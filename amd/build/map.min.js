define(["jquery","core/log"],function(a,i){"use strict";function s(t){this.rootel=t}return s.prototype.main=function(){var n=this;n.layout(),n.rootel.on("change","#assessment-class",function(t){t.preventDefault(),n.layout()}),n.rootel.on("change",".gradeitems",function(t){t.preventDefault();var s=a(this);n.saveMapping(s)})},s.prototype.layout=function(){this.loading();var t=a("#assessment-class").val();a(".assessment").hide(),a('.assessment[data-class="'+t+'"]').show(),this.loading(1)},s.prototype.saveMapping=function(t){var s=t.closest(".assessment");this.submitting(s);var n=t.data("id"),a=t.data("class");i.debug(n),i.debug(a),this.submitting(s,1)},s.prototype.loading=function(t){var s=this;t?setTimeout(function(){s.rootel.removeClass("loading")},200):s.rootel.addClass("loading")},s.prototype.submitting=function(t,s){var n=this;s?setTimeout(function(){n.rootel.removeClass("submitting")},200):(n.rootel.addClass("submitting"),t.append('<div id="submitspinner-'+t.data("id")+'" class="spinner"><div class="circle spin"></div></div>'))},{init:function(){i.debug("local_gradesync/map: initializing");var t=a("#local_gradesync-map-root");t.length?new s(t).main():i.error("local_gradesync/map: '#local_gradesync-map-root' not found!")}}});